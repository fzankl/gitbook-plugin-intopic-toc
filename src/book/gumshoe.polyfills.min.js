/*! gumshoejs v5.1.0 | (c) 2019 Chris Ferdinandi | MIT License | http://github.com/cferdinandi/gumshoe */
Element.prototype.closest||(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(t){var e=this;if(!document.documentElement.contains(this))return null;do{if(e.matches(t))return e;e=e.parentElement}while(null!==e);return null}),function(){if("function"==typeof window.CustomEvent)return;function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=window.Event.prototype,window.CustomEvent=t}(),function(t,e){"function"==typeof define&&define.amd?define([],function(){return e(t)}):"object"==typeof exports?module.exports=e(t):t.Gumshoe=e(t)}("undefined"!=typeof global?global:"undefined"!=typeof window?window:this,function(u){"use strict";var f={container:u,navClass:"active",contentClass:"active",nested:!1,nestedClass:"active",offset:0,reflow:!1,events:!0},d=function(t,e,n){if(n.settings.events){var o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e.dispatchEvent(o)}},n=function(t){var e=0;if(t.offsetParent)for(;t;)e+=t.offsetTop,t=t.offsetParent;return 0<=e?e:0},m=function(t){t.sort(function(t,e){return n(t.content)<n(e.content)?-1:1})},r=function(t,e,n){var o,c=t.getBoundingClientRect(),i="function"==typeof(o=e).offset?parseFloat(o.offset()):parseFloat(o.offset);return n?parseInt(c.bottom,10)<(e.container.innerHeight||document.documentElement.clientHeight):parseInt(c.top,10)<=i},s=function(t){return t.container.innerHeight+t.container.pageYOffset>=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight)},v=function(t,e){var n,o,c=t[t.length-1];if(n=c,s(o=e)&&r(n.content,o,!0))return c;for(var i=t.length-1;0<=i;i--)if(r(t[i].content,e))return t[i]},o=function(t,e){if(e.nested){var n=t.parentNode.closest("li");n&&(n.classList.remove(e.nestedClass),o(n,e))}},p=function(t,e){if(t){var n=t.nav.closest("li");n&&(n.classList.remove(e.navClass),t.content.classList.remove(e.contentClass),o(n,e),d("gumshoeDeactivate",n,{link:t.nav,content:t.content,settings:e}))}},h=function(t,e){if(e.nested){var n=t.parentNode.closest("li");n&&(n.classList.add(e.nestedClass),h(n,e))}};return function(t,e){var n,o,c,i,r,s={};s.setup=function(){n=document.querySelectorAll(t),o=[],Array.prototype.forEach.call(n,function(t){var e=document.getElementById(decodeURIComponent(t.hash.substr(1)));e&&o.push({nav:t,content:e})}),m(o)},s.detect=function(){var t=v(o,r);t?c&&t.content===c.content||(p(c,r),function(t,e){if(t){var n=t.nav.closest("li");n&&(n.classList.add(e.navClass),t.content.classList.add(e.contentClass),h(n,e),d("gumshoeActivate",n,{link:t.nav,content:t.content,settings:e}))}}(t,r),c=t):c&&(p(c,r),c=null)};var a=function(t){i&&u.cancelAnimationFrame(i),i=u.requestAnimationFrame(s.detect)},l=function(t){i&&r.container.cancelAnimationFrame(i),i=r.container.requestAnimationFrame(function(){m(),s.detect()})};s.destroy=function(){c&&p(c),r.container.removeEventListener("scroll",a,!1),r.reflow&&r.container.removeEventListener("resize",l,!1),r=i=c=n=o=null};return r=function(){var n={};return Array.prototype.forEach.call(arguments,function(t){for(var e in t){if(!t.hasOwnProperty(e))return;n[e]=t[e]}}),n}(f,e||{}),s.setup(),s.detect(),r.container.addEventListener("scroll",a,!1),r.reflow&&r.container.addEventListener("resize",l,!1),s}});
